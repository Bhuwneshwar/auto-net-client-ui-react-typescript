import{r,c as U,b as u,B as j,j as e}from"./index-DhLjg7ZU.js";const B=()=>{const[i,p]=r.useState(!0),[l,m]=r.useState(!0),[c,g]=r.useState({number:"",state:"",operator:"",plan:0,UserId:""}),[a,f]=r.useState({transactionMethod:"",upi:"",ifsc:"",bank:0,Amount:0,UserId:""});r.useEffect(()=>{p(!i)},[c]),r.useEffect(()=>{m(!l)},[a]);const C=U(),b=({UserId:t,number:s,state:n,operator:o,plan:d})=>{g(h=>({...h,number:s,plan:d,state:n,operator:o,UserId:t}))},y=({UserId:t,Amount:s,transactionMethod:n,upi:o,ifsc:d,bank:h})=>{f(A=>({...A,transactionMethod:n,Amount:s,ifsc:d,bank:h,UserId:t,upi:o}))},w=async()=>{try{const t=await u.get("/api/v1/admin");console.log("Users",t.data.user),console.log("golden ",t.data.golden),console.log("diamond ",t.data.diamond)}catch(t){console.log(t)}},[x,M]=r.useState(null);r.useEffect(()=>{k()},[i,l]);const k=async()=>{try{const{data:t}=await u.get("/api/v1/admin-work");console.log(t),typeof t=="string"&&j.info(t,{position:"bottom-center"}),M(t)}catch(t){console.log(t)}},v=async(t,s,n)=>{try{const{data:o}=await u.post("/api/v1/recharge-complete",{id:t,number:s,plan:n});console.log(o),typeof o=="string"&&j.info(o,{position:"bottom-center"}),o&&p(!i)}catch(o){console.log("rechComp error :",o)}},S=async(t,s,n)=>{try{const{data:o}=await u.post("/api/v1/withdraw-complete",{id:t,Amount:s,Method:n});console.log(o),o.success&&m(!l)}catch(o){console.log("withdComp error :",o)}};return x?e.jsx(e.Fragment,{children:e.jsxs("div",{id:"my_account",children:[e.jsxs("div",{className:i?"modelBox ":"modelBox hidden",children:[e.jsx("h2",{children:"Recharge "}),e.jsxs("h3",{children:["Contact : ",c.number," "]}),e.jsxs("h3",{children:["Operator : ",c.operator," "]}),e.jsxs("h3",{children:["Plan : ",c.plan," "]}),e.jsxs("h3",{children:["State : ",c.state," "]}),e.jsx("button",{onClick:()=>p(!i),children:"Recharge later "}),e.jsx("button",{onClick:()=>v(c.UserId,c.number,c.plan),children:"Recharge Complete"})]}),e.jsxs("div",{className:l?"modelBox":"modelBox hidden",children:[e.jsx("h2",{children:"Send Money "}),e.jsxs("h3",{children:["Amount : ",Math.floor(a.Amount||0)," "]}),e.jsxs("h3",{children:["Method : ",a.transactionMethod," "]}),e.jsxs("h3",{children:["Upi : ",a.upi," "]}),e.jsxs("h3",{children:["IFSC : ",a.ifsc," "]}),e.jsxs("h3",{children:["ACCOUNT NUMBER : ",a.bank," "]}),e.jsx("button",{onClick:()=>m(!l),children:"Send Money later "}),e.jsx("button",{onClick:()=>S(a.UserId,a.Amount,a.transactionMethod),children:"Money Sent Complete"})]}),e.jsx("button",{onClick:w,children:"Get all data"}),e.jsx("button",{onClick:()=>C("/signup"),children:"Add New User"}),x.map(t=>{const{_id:s,Type:n,number:o,plan:d,Amount:h}=t;return n==="recharge"?e.jsxs("div",{children:[e.jsxs("span",{children:[o," "]}),e.jsxs("span",{children:[d," "]}),e.jsxs("button",{onClick:()=>b(t),children:[n," "]})]},s):n==="sendMoney"?e.jsxs("div",{className:"",children:[e.jsxs("span",{children:[Math.floor(h||0)," "]}),e.jsxs("button",{onClick:()=>y(t),children:[n," "]})]},s):null})]})}):"Loading..."};export{B as default};
